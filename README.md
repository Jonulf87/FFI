# FFI
Et restAPI som har tre enkle metoder. En metode for å registrere nye kjøretøy med en inital posisjon som sendes med. En metode for å oppdatere lokasjonen til et kjøretøy. En metode for å hente ut alle kjørtetøy og tilhørende lokasjonsdata.

Man initialiserer et kjøretøy via en POST-request får å få ID til det aktuelle kjøretøyet. Etter det kan man når som helst oppdatere posisjonen til kjøretøyet via en PUT-request til samme API. Routing skjer autoamtisk da det er kun tre metoder, en GET, en PUT, og en POST.
Controlleren håndterer data som kommer inn og foretar automatisk modelbinding og modelstate kontroll. Ved feil i modelstate vil controller automatisk sende en HTTP-kode med generisk errormessage tilbake til bruker.
Å sende en liten pakke med ID og koordinater krever veldig lite båndbredde for kjøretøy i felten. Controlleren kaller på en metode i en service som håndterer databasekallet. Servicen er injectet i controlleren. I servicen kan man ha egne sjekker gjennom vanlig logikk og har mulighet til å returnere egendefinerte exceptions. Hvis alt er ok i servicen benytter den seg av databasecontexten til å sette inn den oppdaterte dataen inn i databasen.
Databasen er rimelig enkel, bygget opp med EF core. Den er bygget opp slik at det ikke er mulig å ha en lokasjonsentry som ikke har et tilhørende kjøretøy. Dette fordi primærnøkkelen til lokasjonstabellen også er fremmednøkkelen til kjøretøyet det er knyttet til. Fordelen med denne løsningen er at det ikke kan forekomme en lokasjon uten kjøretøy, ulempen er at man ikke har noe historikk på hva som har vært tidligere lokasjon til kjøretøy. 

For en bruker som sitter på hovedkvarteret og vil ha lokasjon til alle kjøretøyene kan brukeren sende en GET-request til API'et og får returnert alle kjøretøy og lokasjonen deres. Dette vil, avhengig av antall kjøretøy i databasen, kreve mer båndbredde enn bare å oppdatere lokasjonen til et enkelt kjøretøy, men siden det var god bådnbredde i hovedkvarteret er ikke dette et problem. Det er uansett snakk om små mengder data som beveger seg.